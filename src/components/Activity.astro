---
import { getCollection } from "astro:content";

let notes = await getCollection("zettelkasten");

notes.sort((n1, n2) => {
  if (n1.data.added_date > n2.data.added_date) return -1;
  else if (n1.data.added_date < n2.data.added_date) return 1;
  else return 0;
});
---

<h2>Recent Activities</h2>
<ol>
  {
    notes.map((entry) => (
      <li>
        <time datetime={entry.data.added_date.toISOString()}>
          {entry.data.added_date.toLocaleDateString("default", {
            day: "2-digit",
          })}{" "}
          {entry.data.added_date.toLocaleDateString("default", {
            month: "short",
          })}{" "}
          {entry.data.added_date.getFullYear()}{" "}
        </time>
        <a href={`/archive/${entry.slug}`}>{entry.data.title}</a>
      </li>
    ))
  }
</ol>

<style>
  ol {
    list-style-type: none;
  }

  @media (max-width: 400px) {
    ol {
      padding-left: 1em;
    }
  }

  li {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }

  time {
    font-family: monospace;
    font-size: 0.9em;
    opacity: 0.85;
  }
</style>
