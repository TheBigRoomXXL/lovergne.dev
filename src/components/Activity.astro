---
import { getCollection } from "astro:content";

const { limit } = Astro.props;

let awesome = await getCollection("awesome");
let blogroll = await getCollection("blogroll");

// @ts-ignore
const activities = awesome.concat(blogroll);

activities.sort((o1, o2) => {
  if (o1.data.added_date > o2.data.added_date) return -1;
  else if (o1.data.added_date < o2.data.added_date) return 1;
  else return 0;
});
---

<h2>Recent Activities</h2>
<ol>
  {
    activities.map((entry) => (
      <li>
        <time datetime={entry.data.added_date.toISOString()}>
          {entry.data.added_date.toLocaleDateString("default", {
            day: "2-digit",
          })}{" "}
          {entry.data.added_date.toLocaleDateString("default", {
            month: "short",
          })}{" "}
          {entry.data.added_date.getFullYear()}{" "}
        </time>
        <a href={`/awesome#${entry.slug}`}>{entry.data.title}</a>
      </li>
    ))
  }
</ol>

<style>
  ol {
    list-style-type: none;
  }

  @media (max-width: 400px) {
    ol {
      padding-left: 1em;
    }
  }

  li {
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
  }

  time {
    font-weight: bold;
    opacity: 0.85;
  }
</style>
